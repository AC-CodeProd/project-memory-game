
"use strict";!function($){$.gameMemory=function(element,options){var defaults={contents:[],interval:"2000",quantity:6,callback:{}},plugin=this;plugin.settings={};var tiling,currentIndex,$element=$(element),element=element,currentTile=[],nbClick=0,nbTileLook=0;plugin.construct=function(){plugin.settings=$.extend({},defaults,options),$element.append('<h1 class="title-game text-center">Jeu du memory</h1>'),$element.append('<section class="row"><div id="tiling" class="col-md-10 col-md-offset-1 col-lg-10 col-lg-offset-1 tiling"></div></section>');var $tiling=$element.find("#tiling");if(0==plugin.settings.contents.length)$tiling.append('<p class="text-center">Pas de carte</p>');else{tiling=_.sample(plugin.settings.contents,plugin.settings.quantity/2),tiling=_.shuffle($.merge(tiling,tiling));for(var i=0;i<=tiling.length-1;i++)$tiling.append('<li class="tile col-xs-5 col-sm-2 col-md-4 col-lg-2"><div class="front"><i class="fa fa-eye"></i></div>'+tiling[i].content+"</li>")}$element.append('<p class="info-game">Nombre de clics : <span  id="number-click" class="number-click">0</span></p>'),plugin.init()},plugin.init=function(){setBindingEvents()};var setBindingEvents=function(){setClickTile()},setClickTile=function(){$element.find(".tile").on("click",function(){var index=$(this).index();currentIndex!=index&&(currentIndex=index,2!=nbTileLook&&(nbClick++,nbTileLook++,$element.find("#number-click").text(nbClick),$(this).toggleClass("tile-look"),_.delay(onTimeOutHideTile($(this)),plugin.settings.interval),onMatchedTile($(this).find(".back").attr("data-tile"))))})},onTimeOutHideTile=function(e){return{apply:function(){currentTile=_.without(currentTile,e.find(".back").attr("data-tile")),e.toggleClass("tile-look"),currentIndex=-1,nbTileLook--}}},onMatchedTile=function(value){currentTile.push(value),2==nbTileLook&&currentTile[0]==currentTile[1]&&$element.find('.back[data-tile="'+currentTile[0]+'"]').parent().addClass("tile-valid")};plugin.construct()},$.fn.gameMemory=function(options,customParams){return $(this).each(function(){if(void 0==$(this).data("gameMemory")){"undefined"==typeof options&&(options={});var plugin=new $.gameMemory(this,options);$(this).data("gameMemory",plugin)}"string"==typeof options&&$(this).data("gameMemory")[options].call($(this),$(this),customParams)})}}(jQuery,window.App);